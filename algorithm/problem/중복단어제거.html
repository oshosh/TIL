<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function solution(arr) {
        const answer = arr.filter((item, idx) => {
          return arr.indexOf(item) === idx;
        });
        return answer;
      }

      function solution2(arr) {
        let answer = [];
        arr.forEach((item, idx) => {
          if (arr.indexOf(item) === idx) {
            answer.push(item);
          }
        });
        return answer;
      }

      let arr = ["good", "time", "good", "time", "student"];
      let numberArr = [10, 20, 30, 40, 50];

      function DataUtil(data) {
        if (!new.target) {
          return new DataUtil(data);
        }
        this.data = data;

        DataUtil.prototype.customForEach = function (predicate, thisArg) {
          for (let i = 0; i < data.length; i++) {
            predicate(data[i], i);
          }
        };

        DataUtil.prototype.customMapFunc = function (predicate, thisArg) {
          let list = [];
          for (let i = 0; i < data.length; i++) {
            list.push(predicate(data[i], i));
          }
          return list;
        };

        DataUtil.prototype.customFilter = function (predicate, thisArg) {
          let list = [];
          let bool = true;

          for (let i = 0; i < data.length; i++) {
            bool = predicate(data[i], i);
            if (bool) list.push(data[i]);
          }
          return list;
        };

        DataUtil.prototype.customReduce = function (predicate, init) {
          let result = init;

          for (let i = 0; i < data.length; i++) {
            let num = predicate(result, data[i]);
            result = num;
          }
          return result;
        };
      }

      let reduceData = DataUtil(numberArr).customReduce(function (acc, cur) {
        return acc + cur;
      }, 0);

      let filterData = DataUtil(arr).customFilter(function (v, i) {
        return v.length !== 4;
      });

      let mapData = DataUtil(arr).customMapFunc(function (v, i) {
        return v + " hi " + String(i);
      });

      DataUtil(arr).customForEach(function (v, i) {
        console.log(v, i);
      });

      console.log(reduceData);
      console.log(filterData);
      console.log(mapData);
      // console.log(solution2(arr));
    </script>
  </body>
</html>
